# 画面仕様

## 譜面別レーダ値一覧表示画面

### 概要

譜面（プレイモード×楽曲×難易度）別にレーダ値を一覧表示する画面。
フィルタ及びソート機能を提供し、目的の譜面を効率的に検索できる。

### 画面レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ ヘッダー: IIDX レーダビューワ                              │
├─────────────────────────────────────────────────────────┤
│ [SP] [DP]  ← プレイモードタブ                            │
├─────────────────────────────────────────────────────────┤
│ フィルタエリア                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 楽曲名検索: [________________]                      │ │
│ │ 難易度: ☑B ☑N ☑H ☑A ☑L                            │ │
│ │ レベル: [1 ▼] 〜 [12 ▼]                             │ │
│ │ [▼ レーダ値フィルタを展開]                          │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ [⚙ カラム設定]  検索結果: xxx件                         │
├─────────────────────────────────────────────────────────┤
│ テーブルエリア                                           │
│ ┌───────┬────┬───┬───┬─────┬─────┬───┬───┬───┬───┬───┬───┐│
│ │楽曲名 │難易度│Lv│BPM│Notes│NOTES│PEAK│SCR│SOF│CHG│CHD││
│ ├───────┼────┼───┼───┼─────┼─────┼───┼───┼───┼───┼───┼───┤│
│ │ ...   │ ...│...│...│ ... │ ... │...│...│...│...│...│...││
│ └───────┴────┴───┴───┴─────┴─────┴───┴───┴───┴───┴───┴───┘│
└─────────────────────────────────────────────────────────┘
```

### プレイモード切り替え

| 項目 | 仕様 |
|------|------|
| UI | タブ形式（SP / DP） |
| デフォルト | SP |
| 動作 | タブクリックで切り替え、テーブル内容が即座に更新 |

### テーブル表示項目

#### カラム一覧

| No | カラム名 | フィールド | 幅 | ソート | PC表示 | スマホ初期表示 |
|----|----------|------------|-----|--------|--------|----------------|
| 1 | 楽曲名 | title | 可変 | ○ | ○ | ○ |
| 2 | 難易度 | difficulty | 60px | ○ | ○ | ○ |
| 3 | Lv | level | 40px | ○ | ○ | ○ |
| 4 | BPM | bpm | 80px | ○ | ○ | × |
| 5 | Notes | noteCount | 60px | ○ | ○ | × |
| 6 | NOTES | radar.notes | 60px | ○ | ○ | ○ |
| 7 | PEAK | radar.peak | 60px | ○ | ○ | ○ |
| 8 | SCRATCH | radar.scratch | 60px | ○ | ○ | ○ |
| 9 | SOF-LAN | radar.soflan | 60px | ○ | ○ | ○ |
| 10 | CHARGE | radar.charge | 60px | ○ | ○ | ○ |
| 11 | CHORD | radar.chord | 60px | ○ | ○ | ○ |

#### 難易度カラムの表示

難易度は略称で表示し、テーマ色を背景色として使用する。

| 難易度 | 表示（SP） | 表示（DP） | 背景色 |
|--------|------------|------------|--------|
| BEGINNER | SPB | DPB | 黄緑色 (#90EE90) |
| NORMAL | SPN | DPN | 水色 (#87CEEB) |
| HYPER | SPH | DPH | 黄色 (#FFD700) |
| ANOTHER | SPA | DPA | 赤色 (#FF6B6B) |
| LEGGENDARIA | SPL | DPL | 紫色 (#DDA0DD) |

#### レーダ値の表示形式

- 小数第2位まで表示（例: 123.45）
- 0.00の場合も表示

### カラム設定機能

ユーザーが任意にカラムの表示/非表示を切り替えられる機能。

| 項目 | 仕様 |
|------|------|
| UI | 歯車アイコンボタン → ポップオーバーまたはモーダル |
| 内容 | 各カラムのチェックボックス |
| 保存 | LocalStorageに保存し、次回アクセス時に復元 |

### フィルタ機能

#### 楽曲名検索

| 項目 | 仕様 |
|------|------|
| UI | テキスト入力フィールド |
| 検索方式 | 部分一致（大文字小文字区別なし） |
| 動作 | 入力中にリアルタイムでフィルタ（デバウンス300ms） |

#### 難易度フィルタ

| 項目 | 仕様 |
|------|------|
| UI | チェックボックス（5つ: B, N, H, A, L） |
| デフォルト | すべてチェック済み |
| 動作 | 複数選択可能、チェックされた難易度のみ表示 |

#### レベルフィルタ

| 項目 | 仕様 |
|------|------|
| UI | ドロップダウン2つ（最小、最大） |
| 範囲 | 1〜12 |
| デフォルト | 最小: 1、最大: 12（全レベル表示） |
| 動作 | 指定範囲内のレベルのみ表示 |

#### レーダ値フィルタ

| 項目 | 仕様 |
|------|------|
| UI | 折りたたみ式パネル内に配置 |
| 各レーダ | 最小値・最大値の数値入力（0.00〜200.00） |
| デフォルト | 最小: 0、最大: 200（フィルタなし） |
| 動作 | 指定範囲内のレーダ値を持つ譜面のみ表示 |

### ソート機能

| 項目 | 仕様 |
|------|------|
| UI | カラムヘッダークリックで切り替え |
| 方向 | 昇順 → 降順 → ソートなし の3状態 |
| デフォルト | 楽曲名昇順 |
| 複数ソート | 非対応（単一カラムのみ） |

### レスポンシブ対応

#### ブレークポイント

| 名称 | 幅 | 説明 |
|------|-----|------|
| PC | 1024px以上 | フル表示 |
| タブレット | 768px〜1023px | 一部カラム省略可 |
| スマホ | 767px以下 | コンパクト表示 |

#### スマホ表示時の変更点

- BPM、ノーツ数カラムを初期非表示（カラム設定で表示可能）
- フィルタエリアを折りたたみ式に変更
- テーブルを横スクロール可能に

### 状態管理

#### LocalStorageに保存する項目

| キー | 内容 |
|------|------|
| `iidx-radar-viewer-columns` | カラム表示設定 |
| `iidx-radar-viewer-playmode` | 最後に選択したプレイモード |

### エラー表示

| 状況 | 表示 |
|------|------|
| データ読み込み中 | ローディングスピナー + "データを読み込み中..." |
| データ取得エラー | エラーメッセージ + 再読み込みボタン |
| 検索結果0件 | "条件に一致する譜面がありません" |
